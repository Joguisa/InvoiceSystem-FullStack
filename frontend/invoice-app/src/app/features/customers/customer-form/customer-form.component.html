<form [formGroup]="form" (ngSubmit)="submit()" class="flex flex-column gap-4">
    <div class="flex flex-column gap-2">
        <label for="identificationType">Tipo de Identificación *</label>
        <p-dropdown id="identificationType" formControlName="identificationType" [options]="identificationTypes"
            optionLabel="label" optionValue="value" placeholder="Seleccione tipo"
            [class.ng-invalid]="(submitted() || f['identificationType'].touched) && f['identificationType'].errors"
            [class.ng-dirty]="(submitted() || f['identificationType'].touched) && f['identificationType'].errors">
        </p-dropdown>
        <small *ngIf="(submitted() || f['identificationType'].touched) && f['identificationType'].errors?.['required']"
            class="text-red-500">
            Tipo de identificación es requerido.
        </small>
    </div>

    <div class="flex flex-column gap-2">
        <label for="identification">Identificación *</label>
        <input pInputText id="identification" formControlName="identification"
            [appInputMask]="f['identificationType'].value === IdentificationType.Pasaporte ? 'alphanumeric' : 'numeric'"
            [maxLength]="f['identificationType'].value === IdentificationType.RUC ? 13 : f['identificationType'].value === IdentificationType.Pasaporte ? 20 : 10"
            [class.ng-invalid]="(submitted() || f['identification'].touched) && f['identification'].errors"
            [class.ng-dirty]="(submitted() || f['identification'].touched) && f['identification'].errors" />
        <small *ngIf="(submitted() || f['identification'].touched) && f['identification'].errors" class="text-red-500">
            {{ getIdentificationError() }}
        </small>
    </div>

    <div class="flex flex-column gap-2">
        <label for="name">Nombre *</label>
        <input pInputText id="name" formControlName="name"
            [class.ng-invalid]="(submitted() || f['name'].touched) && f['name'].errors"
            [class.ng-dirty]="(submitted() || f['name'].touched) && f['name'].errors" />
        <small *ngIf="(submitted() || f['name'].touched) && f['name'].errors?.['required']" class="text-red-500">
            Nombre es requerido.
        </small>
        <small *ngIf="(submitted() || f['name'].touched) && f['name'].errors?.['minlength']" class="text-red-500">
            Nombre debe tener al menos 2 caracteres.
        </small>
        <small *ngIf="(submitted() || f['name'].touched) && f['name'].errors?.['maxlength']" class="text-red-500">
            Nombre no puede exceder 100 caracteres.
        </small>
    </div>

    <div class="flex flex-column gap-2">
        <label for="email">Correo</label>
        <input pInputText id="email" formControlName="email" type="email"
            [class.ng-invalid]="(submitted() || f['email'].touched) && f['email'].errors"
            [class.ng-dirty]="(submitted() || f['email'].touched) && f['email'].errors" />
        <small *ngIf="(submitted() || f['email'].touched) && f['email'].errors?.['email']" class="text-red-500">
            Ingrese un correo válido.
        </small>
    </div>

    <div class="flex flex-column gap-2">
        <label for="phone">Teléfono</label>
        <input pInputText id="phone" formControlName="phone" appInputMask="numeric" [maxLength]="15"
            [class.ng-invalid]="(submitted() || f['phone'].touched) && f['phone'].errors"
            [class.ng-dirty]="(submitted() || f['phone'].touched) && f['phone'].errors" />
        <small *ngIf="(submitted() || f['phone'].touched) && f['phone'].errors?.['pattern']" class="text-red-500">
            Teléfono debe tener entre 7-15 dígitos.
        </small>
    </div>

    <div class="flex flex-column gap-2">
        <label for="address">Dirección</label>
        <input pInputText id="address" formControlName="address"
            [class.ng-invalid]="(submitted() || f['address'].touched) && f['address'].errors"
            [class.ng-dirty]="(submitted() || f['address'].touched) && f['address'].errors" />
        <small *ngIf="(submitted() || f['address'].touched) && f['address'].errors?.['maxlength']" class="text-red-500">
            Dirección no puede exceder 200 caracteres.
        </small>
    </div>

    <div class="flex justify-content-end gap-2 mt-4">
        <p-button label="Cancelar" severity="secondary" [text]="true" (onClick)="onCancel.emit()"></p-button>
        <p-button label="Guardar" type="submit"></p-button>
    </div>
</form>